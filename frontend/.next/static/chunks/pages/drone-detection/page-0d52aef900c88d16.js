(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{140:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>i,tU:()=>r});var a=t(7876),l=t(4232),n=t(7215);let r=e=>{let{className:s,value:t,onValueChange:r,children:i,...d}=e,[o,h]=l.useState(t);return l.useEffect(()=>{h(t)},[t]),(0,a.jsx)(c.Provider,{value:{value:o,onValueChange:e=>{h(e),r(e)}},children:(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col gap-2",s),...d,children:i})})};r.displayName="Tabs";let c=l.createContext(void 0),i=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex gap-2 border-b",s),...t})};i.displayName="TabsList";let d=e=>{let{className:s,value:t,...r}=e,i=l.useContext(c);if(!i)throw Error("TabsTrigger must be used within Tabs");let d=i.value===t;return(0,a.jsx)("button",{type:"button",className:(0,n.cn)("px-4 py-2 text-sm font-medium text-primary-900 border-b-2 border-transparent focus:outline-none",d?"border-primary-700":"hover:border-primary-700",s),"aria-selected":d,onClick:()=>i.onValueChange(t),...r})};d.displayName="TabsTrigger";let o=e=>{let{className:s,value:t,children:r,...i}=e,d=l.useContext(c);if(!d)throw Error("TabsContent must be used within Tabs");return d.value!==t?null:(0,a.jsx)("div",{className:(0,n.cn)("py-4",s),...i,children:r})};o.displayName="TabsContent"},1845:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1713).A)("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]])},1871:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/drone-detection/page",function(){return t(4692)}])},3433:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1713).A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},4692:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(7876),l=t(4232),n=t(6960),r=t(8638),c=t(140),i=t(1713);let d=(0,i.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var o=t(1845);let h=(0,i.A)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var x=t(3433);let u=(0,i.A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),m=(0,i.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),j=(0,i.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p=t(7215);let v=l.forwardRef((e,s)=>{let{className:t,value:l,max:n=100,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,p.cn)("w-full h-2 bg-gray-200 rounded-full",t),...r,children:(0,a.jsx)("div",{className:"h-2 bg-primary-700 rounded-full transition-all",style:{width:"".concat(Math.min(100,l/n*100),"%")}})})});v.displayName="Progress";var y=t(6786);let f=t(5364).env.NEXT_PUBLIC_DRONE_API_URL||"http://localhost:8000";function N(){let e=(0,l.useRef)(null),[s,t]=(0,l.useState)(!1),[i,p]=(0,l.useState)(null),[N,g]=(0,l.useState)(null),[b,w]=(0,l.useState)("tello"),[k,C]=(0,l.useState)({battery:100,altitude:0,speed:0,signal:100,isConnected:!1}),[_,T]=(0,l.useState)("live");(0,l.useEffect)(()=>{let t;return s&&(t=setInterval(async()=>{try{let s=await fetch("".concat(f,"/latest_frame"));if(204===s.status)return;let t=await s.blob(),a=URL.createObjectURL(t);e.current&&(e.current.src=a)}catch(e){console.error(e),g("Failed to fetch frame")}},300)),()=>clearInterval(t)},[s]),(0,l.useEffect)(()=>{let e;return s&&(e=setInterval(async()=>{try{let e=await fetch("".concat(f,"/latest_prediction")),s=await e.json();p(s.prediction)}catch(e){console.error(e),g("Failed to fetch prediction")}},1e3)),()=>clearInterval(e)},[s]),(0,l.useEffect)(()=>{let e;return s&&"tello"===b&&(e=setInterval(async()=>{try{let e=await fetch("".concat(f,"/drone_status")),s=await e.json();C(s)}catch(e){console.error(e),g("Failed to fetch drone status")}},1e3)),()=>clearInterval(e)},[s,b]);let S=async()=>{g(null);try{(await fetch("".concat(f,"/start?source=").concat(b))).ok?t(!0):g("Unable to start detector")}catch(e){g("API unreachable")}},A=async()=>{g(null);try{await fetch("".concat(f,"/stop"))}catch(e){}finally{t(!1),p(null)}},E=async e=>{try{await fetch("".concat(f,"/drone_command"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e})})}catch(e){g("Failed to send drone command")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-green-700",children:"Drone Control Center"}),N&&(0,a.jsxs)("div",{className:"flex items-center text-red-600 mb-4 bg-red-50 p-3 rounded-lg",children:[(0,a.jsx)(d,{className:"w-5 h-5 mr-2"})," ",N]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{children:"Live Feed"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"w-full aspect-video bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:(0,a.jsx)("img",{ref:e,alt:"Live frame",className:"object-contain w-full h-full"})})})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{children:"Drone Status"})}),(0,a.jsxs)(r.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"w-5 h-5 mr-2 text-gray-600"}),(0,a.jsx)("span",{children:"Battery"})]}),(0,a.jsx)(v,{value:k.battery,className:"w-32"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h,{className:"w-5 h-5 mr-2 text-gray-600"}),(0,a.jsx)("span",{children:"Altitude"})]}),(0,a.jsxs)("span",{children:[k.altitude,"m"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 mr-2 text-gray-600"}),(0,a.jsx)("span",{children:"Signal"})]}),(0,a.jsx)(v,{value:k.signal,className:"w-32"})]})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{children:"Controls"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("takeoff"),children:"Take Off"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("land"),children:"Land"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("emergency"),children:"Emergency"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("up"),children:"Up"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("down"),children:"Down"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>E("flip"),children:"Flip"})]})})]})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(c.tU,{value:_,onValueChange:T,children:[(0,a.jsxs)(c.j7,{children:[(0,a.jsx)(c.Xi,{value:"live",children:"Live Detection"}),(0,a.jsx)(c.Xi,{value:"mission",children:"Mission Planning"}),(0,a.jsx)(c.Xi,{value:"settings",children:"Settings"})]}),(0,a.jsx)(c.av,{value:"live",className:"mt-4",children:(0,a.jsx)(r.Zp,{children:(0,a.jsx)(r.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"border rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"tello",children:"Tello Drone"}),(0,a.jsx)("option",{value:"webcam",children:"Webcam"})]}),s?(0,a.jsxs)(n.$,{onClick:A,variant:"destructive",children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"})," Stop"]}):(0,a.jsxs)(n.$,{onClick:S,className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(u,{className:"w-4 h-4 mr-2"})," Start Detection"]}),s&&!i&&(0,a.jsx)(j,{className:"animate-spin text-gray-600"}),i&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Prediction:"}),(0,a.jsx)("span",{className:"text-green-600",children:i})]})]})})})}),(0,a.jsx)(c.av,{value:"mission",className:"mt-4",children:(0,a.jsx)(r.Zp,{children:(0,a.jsx)(r.Wu,{className:"pt-6",children:(0,a.jsx)(y.default,{})})})}),(0,a.jsx)(c.av,{value:"settings",className:"mt-4",children:(0,a.jsx)(r.Zp,{children:(0,a.jsx)(r.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Detection Sensitivity"}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",className:"w-32"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Camera Resolution"}),(0,a.jsxs)("select",{className:"border rounded px-2 py-1",children:[(0,a.jsx)("option",{children:"720p"}),(0,a.jsx)("option",{children:"1080p"})]})]})]})})})})]})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[482,786,636,593,792],()=>s(1871)),_N_E=e.O()}]);